```js
function main() {
  setTimeout(function greet() {
    console.log('Hello!')
  }, 2000)

  console.log('Bye!')
}

main()
```

теперь у нас будет не только стек вызовов — также мы включим Web API и очередь задач, которую Web API использует для хранения того, что нужно выполнить.

Вызов main():

<img src="./assets/1.png" />

В Web API и очереди задач пока пусто.

Вызов setTimeout():

<img src="./assets/2.png" />

Когда setTimeout() исчезает из стека, он попадает в видимость Web API, где интерпретатор понимает, что внутри него есть функция greet(), которую надо выполнить через 2 секунды:

<img src="./assets/3.png" />

После этого выполняется вызов консоли console.log('Bye!'). В Web API находится функция setTimeout(greet). Она будет там до тех пор, пока не пройдёт 2 секунды:

<img src="./assets/4.png" />

Отработал console.log(), заканчивается работа main():

<img src="./assets/5.png" />

main() отработал, стек пуст. 2 секунды ещё не прошло, поэтому setTimeout(greet) все ещё в Web API:

<img src="./assets/6.png" />

Наконец, 2 секунды прошли - функция greet() перемещается в очередь задач:

<img src="./assets/7.png" />

Теперь цикл событий перемещает функцию greet() из списка задач в вызов:

<img src="./assets/8.png" />

Затем вызов console.log('Hello!'):

<img src="./assets/9.png" />

И наконец стек пуст.
Заметьте, что стек вызовов и очередь задач называются именно стеком и очередью. Потому что вызовы из стека работают по принципу «последний зашёл, первый вышел» (LIFO: last in, first out), а в очереди — по принципу «первый зашёл, первый вышел» (FIFO: first in, first out).

Очередь — структура данных, в которой элементы упорядочены так, что первый попавший в очередь элемент покидает её первым.
